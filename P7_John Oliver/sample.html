<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body onload="loadData()">
    <form  onsubmit="addData()">
        <input type = "text" id = "txtName" placeholder="Restaurant name"/><br>
        <input type = "number" min = "1" max = "5" id = "score" placeholder="Score"/><br/>
        <textarea id = "comment" rows="3" placeholder = "Enter your comments here"></textarea>
        <input type = "submit" value="Hello"/>
    </form>
    <p id ="sample"> 
        <label></label>
    </p>
    <script src="//cdn.jsdelivr.net/npm/pouchdb@7.2.1/dist/pouchdb.min.js"></script>
    <script>
      
      var db = new PouchDB('reviews');
      var remoteCouch = false;
      var data;
        function addData()
        {
            //alert("okay");            
            var review = {
                _id: new Date().toISOString(),
                store: txtName.value,
                rate: score.value,
                comment: comment.value
            };
            db.put(review, function callback(err, result) {
                if (!err) {
                    alert("Data has been inserted");
                }else{
                   console.log(err);
                }
            });

            // db.post(review).then(function (response) {
            //     // handle response
            //     console.log(response);
            // }).catch(function (err) {
            //     console.log(err);
            // });
          
        }
        
        function loadData()
        {
            db.allDocs({include_docs: true}, function(err, docs) {
                if (err) {
                    return console.log(err);
                } else {
                    document.getElementById('sample').innerHTML += JSON.stringify(docs.rows);
                    // data += docs.rows;
                    // let msg = JSON.stringify(data);
                    // document.querySelector('#sample').innerHTML += msg;
                }
            });
        }
        
    </script>
</body>
</html>